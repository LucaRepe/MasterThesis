# Build image from python repository
FROM python:3.10.6

# Creation of MasterThesis directory and subdirectories
RUN mkdir /root/MasterThesis \
    && mkdir /root/MasterThesis/Pickles

# ADD entrypointRadare.sh /root/MasterThesis/entrypoint.sh
# RUN chmod +x /root/MasterThesis/entrypoint.sh

# Install python packages
RUN pip install r2pipe networkx xxhash

# Add tools inside the container
ADD /Headless_scripts/disassemblerRadare.py /root/MasterThesis
ADD /Tools/radare2/ /root/MasterThesis/Tools/radare2

# The image build will operate from the MasterThesis directory
WORKDIR /root/MasterThesis

# Run installation of radare2
RUN /root/MasterThesis/Tools/radare2/sys/install.sh

# ENTRYPOINT ["/root/MasterThesis/entrypoint.sh"]
ENTRYPOINT ["tail", "-f", "/dev/null"]
